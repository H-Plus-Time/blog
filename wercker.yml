box: andthensome/alpine-surge-bash
deploy:
  steps:
    - script:
        name: copy resources to public dir
        code: |
          mkdir public
          cp -r posts public
    - script:
        name: install bower, git, install components
        code: |
          npm install -g bower
          apk add git
          bower install --allow-root
    - alrayyes/surge-deploy:
        login: 'hplustime@gmail.com'
        directory: "public"
        token: $SURGE_TOKEN
        domain: "blogcontent.hplustime.com"
    - script:
        name: trigger build of gh-pages repo
        code: |
          curl  -H 'Content-Type: application/json' -H  \
          "Authorization: Bearer $WERCKER_TOKEN" -X POST -d \
          '{"applicationId": "583c53b76bd7f10100c620dd", "branch":"master-dev",
          "pipelineId": "583c53b76bd7f10100c620e0"}' \
          https://app.wercker.com/api/v3/runs
